<!DOCTYPE html>
<html>
<head>
    <title>Location Logger</title>
</head>
<body onload="loadHistory()">

    <h2>Location Tracker</h2>

    <button onclick="getLocation()">Get My Location</button>

    <p id="output"></p>
    <h3>Location History (Last 5)</h3>
    <ul id="history"></ul>

    <script>
        function getLocation() {
            navigator.geolocation.getCurrentPosition(success, error);
        }

        function success(position) {
            let lat = position.coords.latitude;
            let lon = position.coords.longitude;

            document.getElementById("output").innerText =
                "Latitude: " + lat + " , Longitude: " + lon;

            let locations = JSON.parse(localStorage.getItem("locations")) || [];

            locations.push({ latitude: lat, longitude: lon });

            if (locations.length > 5) {
                locations.shift();
            }

            localStorage.setItem("locations", JSON.stringify(locations));
            loadHistory();
        }

        function error(err) {
            let message = "";
            if (err.code === 1) message = "Permission Denied";
            else if (err.code === 2) message = "Location Unavailable";
            else if (err.code === 3) message = "Timeout";
            document.getElementById("output").innerText = message;
        }

        function loadHistory() {
            let locations = JSON.parse(localStorage.getItem("locations")) || [];
            let historyList = document.getElementById("history");
            historyList.innerHTML = "";

            locations.forEach(loc => {
                let li = document.createElement("li");
                li.innerText = "Lat: " + loc.latitude + " , Lon: " + loc.longitude;
                historyList.appendChild(li);
            });
        }
    </script>

</body>
</html>
